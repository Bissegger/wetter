<!DOCTYPE html>

<html lang="de">
<head>
<meta charset="UTF-8">
<title>NASA-Style WEATHER-AI 4D Realistisch Part 1</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Orbitron:wght@400;600&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/libs/perlin.js"></script>
<style>
body{margin:0; background:#05070d; overflow:hidden; font-family:'Inter',sans-serif;}
canvas{display:block;}
#topbar{position:absolute;top:0;left:0;right:0;height:60px;display:flex;align-items:center;gap:20px;padding:0 20px;background:linear-gradient(#0c1220,#060912);border-bottom:1px solid #1b2a44;z-index:10;}
#logo{font-family:'Orbitron';letter-spacing:1px;}
.tab{padding:8px 16px;border-radius:10px;cursor:pointer;color:#9fb8ff;transition:.25s;}
.tab.active{background:linear-gradient(180deg,#142a55,#0c1a36);color:white;box-shadow:0 0 14px rgba(0,160,255,.6);}
#left{position:absolute;top:60px;left:0;bottom:50px;width:260px;padding:14px;background:rgba(8,12,25,.85);border-right:1px solid #1b2a44;z-index:5;}
.panel{background:rgba(10,16,30,.85);border:1px solid #1b2a44;border-radius:12px;padding:12px;margin-bottom:10px;cursor:pointer;transition:.25s;}
.panel:hover{box-shadow:0 0 16px rgba(0,234,255,.35);transform:translateX(2px);}
#bottom{position:absolute;bottom:0;left:260px;right:0;height:50px;display:flex;align-items:center;gap:20px;padding:0 16px;background:#0b132b;border-top:1px solid #1b2a44;font-size:13px;z-index:5;}
#alerts{position:absolute;right:20px;bottom:70px;width:280px;background:linear-gradient(180deg,#3b0d0d,#1a0505);border:1px solid #ff3b3b;border-radius:14px;padding:14px;box-shadow:0 0 25px rgba(255,60,60,.5);animation:pulse 1.8s infinite;z-index:6;}
@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.02)}100%{transform:scale(1)}}
#timelineBox{margin-left:auto;display:flex;align-items:center;gap:10px;}
input[type=range]{width:220px;appearance:none;height:4px;background:linear-gradient(90deg,#2d6cdf,#00eaff,#ff9f1c);border-radius:4px;}
input[type=range]::-webkit-slider-thumb{appearance:none;width:16px;height:16px;border-radius:50%;background:white;box-shadow:0 0 12px #00eaff;}
</style>
</head>
<body>
<div id="topbar">
  <div id="logo">WEATHER-AI NASA</div>
  <div class="tab active" onclick="setMode('3d')">3D Globus</div>
  <div class="tab" onclick="setMode('2d')">2D Karte</div>
  <div class="tab" onclick="setMode('4d')">4D Wetterkarte</div>
  <div id="timelineBox">
    <span>â±</span>
    <input type="range" min="-72" max="72" value="0" id="time">
  </div>
</div>
<div id="left">
  <div class="panel" onclick="setWeather('temperature')">ğŸŒ¡ Temperatur</div>
  <div class="panel" onclick="setWeather('precipitation')">ğŸŒ§ Niederschlag</div>
  <div class="panel" onclick="setWeather('wind')">ğŸŒ¬ Wind</div>
</div>
<div id="alerts">
  <strong>EXTREM-WETTERALARM</strong><br><br>
  ğŸ”´ Hurrikan IRIS â€“ Kategorie 4<br>
  ğŸŸ  Tornado-Warnung â€“ Mittel<br>
  ğŸ”´ Starkregen â€“ Hoch
</div>
<div id="bottom">
  ğŸŒ¡ 28 Â°C ğŸŒ¬ 75 km/h ğŸŒ§ 12 mm
</div>
<script>
// Szene & Kamera
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, window.innerWidth/window.innerHeight, 0.1, 1000);
camera.position.set(0,1.4,4);
const renderer = new THREE.WebGLRenderer({antialias:true});
renderer.setSize(window.innerWidth,window.innerHeight);
renderer.autoClear = true;
document.body.appendChild(renderer.domElement);
const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

// Licht
scene.add(new THREE.AmbientLight(0xffffff, 0.8));
const sun = new THREE.DirectionalLight(0xffffff,1.2);
sun.position.set(5,3,5);
scene.add(sun);

// Globus mit Basisfarbe, sofort sichtbar
const earthMaterial = new THREE.MeshStandardMaterial({color:0x3399ff, roughness:0.7, metalness:0.1});
const earthGeometry = new THREE.SphereGeometry(1,64,64);
const earth = new THREE.Mesh(earthGeometry, earthMaterial);
scene.add(earth);

// AtmosphÃ¤rischer Glow
const atmosphere = new THREE.Mesh(new THREE.SphereGeometry(1.05,64,64),
  new THREE.MeshBasicMaterial({color:0x66ccff, transparent:true, opacity:0.15, side:THREE.BackSide})
);
scene.add(atmosphere);

// Procedural Wolken
const cloudGeo = new THREE.SphereGeometry(1.02,64,64);
const cloudMat = new THREE.MeshStandardMaterial({color:0xffffff, transparent:true, opacity:0.5});
const clouds = new THREE.Mesh(cloudGeo, cloudMat);
scene.add(clouds);

function updateClouds(){
  cloudGeo.vertices.forEach(v=>{
    v.normalize().multiplyScalar(1.02 + 0.005 * noise.perlin3(v.x + time*0.01,v.y,v.z));
  });
  cloudGeo.verticesNeedUpdate = true;
}

// Hurrikane
const hurricaneGroup = new THREE.Group();
scene.add(hurricaneGroup);
for(let i=0;i<6;i++){
  const torus = new THREE.Mesh(new THREE.TorusGeometry(0.18+i*0.02,0.025,16,100),
    new THREE.MeshBasicMaterial({color:0xff6600, transparent:true, opacity:0.6-i*0.08})
  );
  torus.rotation.x=Math.PI/2;
  hurricaneGroup.add(torus);
}
hurricaneGroup.position.set(0.6,0.2,0.8);

// Wetterkarten
const weatherMaps={temperature:0xffcc00, precipitation:0x0066ff, wind:0x33ff33};
const overlay3D = new THREE.Mesh(new THREE.SphereGeometry(1.03,64,64),
  new THREE.MeshStandardMaterial({color:weatherMaps.temperature, transparent:true, opacity:0.5})
);
scene.add(overlay3D);
const map2D = new THREE.Mesh(new THREE.PlaneGeometry(4,2),
  new THREE.MeshBasicMaterial({color:weatherMaps.temperature, transparent:true, opacity:0.8})
);
map2D.visible=false;
scene.add(map2D);

let time=0;
let mode="3d";
function setMode(m){
  mode=m;
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  event.target.classList.add('active');
  if(m==="2d"){
    camera.position.set(0,0,3);
    controls.enableRotate=false;
    map2D.visible=true;
    earth.visible=false;
    clouds.visible=false;
    overlay3D.visible=false;
  } else {
    map2D.visible=false;
    earth.visible=true;
    clouds.visible=true;
    overlay3D.visible=true;
    controls.enableRotate=true;
    if(m==="3d") camera.position.set(0,0,4);
    if(m==="4d") camera.position.set(0,1.4,4);
  }
}
function setWeather(type){
  let color=weatherMaps.temperature;
  if(type==="precipitation") color=weatherMaps.precipitation;
  if(type==="wind") color=weatherMaps.wind;
  overlay3D.material.color.set(color);
  map2D.material.color.set(color);
}
const timeSlider=document.getElementById("time");

function animate(){
  requestAnimationFrame(animate);
  // Nur rendern, wenn Materialien fertig
  if(!earth.material || !clouds.material) return;

  const t=parseFloat(timeSlider.value);
  earth.rotation.y+=0.001;
  clouds.rotation.y+=0.0015;
  overlay3D.rotation.y+=0.0015;
  updateClouds();
  hurricaneGroup.rotation.z+=0.03;
  hurricaneGroup.children.forEach((ring,i)=>{
    const scale=1+Math.sin(time*0.2+i*0.5)*0.25;
    ring.scale.set(scale,scale,scale);
  });
  time+=0.5;
  controls.update();
  renderer.render(scene,camera);
}
animate();
window.addEventListener('resize',()=>{
  camera.aspect=window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth,window.innerHeight);
});
</script>
</body>
</html>
