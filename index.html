<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>NASA-Style WEATHER GLOBE</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Orbitron:wght@400;600&display=swap" rel="stylesheet">

<!-- Three.js -->
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.152.2/examples/js/controls/OrbitControls.js"></script>

<style>
:root{
  --bg:#05070d;
  --panel:rgba(10,16,30,.85);
  --border:#1b2a44;
  --cyan:#00eaff;
  --orange:#ff9f1c;
  --red:#ff3b3b;
}

*{box-sizing:border-box;margin:0;padding:0}

body{
  background:var(--bg);
  font-family:'Inter',sans-serif;
  overflow:hidden;
}

/* TOPBAR */
#topbar{
  position:absolute;top:0;left:0;right:0;height:60px;
  display:flex;align-items:center;gap:20px;
  padding:0 20px;
  background:linear-gradient(#0c1220,#060912);
  border-bottom:1px solid var(--border);
  z-index:10;
}
#logo{
  font-family:'Orbitron';
  letter-spacing:1px;
  color:white;
}
.tab{
  padding:8px 16px;
  border-radius:10px;
  cursor:pointer;
  color:#9fb8ff;
  transition:.25s;
}
.tab.active{
  background:linear-gradient(180deg,#142a55,#0c1a36);
  color:white;
  box-shadow:0 0 14px rgba(0,160,255,.6);
}

/* LEFT PANEL */
#left{
  position:absolute;
  top:60px;left:0;bottom:50px;
  width:260px;
  padding:14px;
  background:rgba(8,12,25,.85);
  border-right:1px solid var(--border);
  z-index:5;
}
.panel{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px;
  padding:12px;
  margin-bottom:10px;
  cursor:pointer;
  transition:.25s;
}
.panel:hover{
  box-shadow:0 0 16px rgba(0,234,255,.35);
  transform:translateX(2px);
}

/* BOTTOM HUD */
#bottom{
  position:absolute;
  bottom:0;left:260px;right:0;height:50px;
  display:flex;align-items:center;gap:20px;
  padding:0 16px;
  background:#0b132b;
  border-top:1px solid var(--border);
  font-size:13px;
  z-index:5;
}

/* TIMELINE */
#timelineBox{
  margin-left:auto;
  display:flex;
  align-items:center;
  gap:10px;
}
input[type=range]{
  width:220px;
  appearance:none;
  height:4px;
  background:linear-gradient(90deg,#2d6cdf,#00eaff,#ff9f1c);
  border-radius:4px;
}
input[type=range]::-webkit-slider-thumb{
  appearance:none;
  width:16px;height:16px;
  border-radius:50%;
  background:white;
  box-shadow:0 0 12px var(--cyan);
}

/* LOADER */
#loader{
  position:absolute;top:0;left:0;right:0;bottom:0;
  background:#05070d;
  display:flex;
  justify-content:center;
  align-items:center;
  flex-direction:column;
  z-index:20;
  color:white;
  font-family:'Orbitron';
  font-size:20px;
}
#loaderBar{
  width:300px;
  height:10px;
  border:1px solid #00eaff;
  border-radius:5px;
  margin-top:10px;
  overflow:hidden;
}
#loaderBarInner{
  width:0;
  height:100%;
  background:#00eaff;
}
</style>
</head>

<body>

<!-- LOADER -->
<div id="loader">
  Initialisiere Globus‚Ä¶
  <div id="loaderBar"><div id="loaderBarInner"></div></div>
</div>

<!-- TOP -->
<div id="topbar">
  <div id="logo">WEATHER-AI</div>
  <div class="tab active" onclick="setMode('3d')">3D Globus</div>
  <div class="tab" onclick="setMode('2d')">2D Karte</div>
  <div class="tab" onclick="setMode('4d')">4D Wetterkarte</div>
  <div id="timelineBox">
    <span>‚è±</span>
    <input type="range" min="-72" max="72" value="0" id="time">
  </div>
</div>

<!-- LEFT PANEL -->
<div id="left">
  <div class="panel">üå§ Aktuelles Wetter</div>
  <div class="panel">üå™ Sturmtracking</div>
  <div class="panel">üå° Temperatur</div>
  <div class="panel">üåß Niederschlag</div>
  <div class="panel">üå¨ Wind & Jetstream</div>
  <div class="panel">üìä Historie</div>
</div>

<!-- BOTTOM -->
<div id="bottom">
  üå° 28 ¬∞C
  üå¨ 75 km/h
  üåß 12 mm
</div>

<script>
const scene = new THREE.Scene();
const camera = new THREE.PerspectiveCamera(45, innerWidth/innerHeight, 0.1, 1000);
camera.position.z = 4;

const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(innerWidth, innerHeight);
renderer.outputEncoding = THREE.sRGBEncoding;
renderer.toneMapping = THREE.ACESFilmicToneMapping;
renderer.toneMappingExposure = 1.2;
document.body.appendChild(renderer.domElement);

const controls = new THREE.OrbitControls(camera, renderer.domElement);
controls.enableDamping = true;

// LIGHTS
scene.add(new THREE.AmbientLight(0x404040,1.2));
const sun = new THREE.DirectionalLight(0xffffff,1.4);
sun.position.set(5,3,5);
scene.add(sun);

// EARTH
const loader = new THREE.TextureLoader();
const earth = new THREE.Mesh(
  new THREE.SphereGeometry(1,64,64),
  new THREE.MeshPhongMaterial({color:0x2233ff})
);
scene.add(earth);

// ATMOSPHERE GLOW
const atmosphere = new THREE.Mesh(
  new THREE.SphereGeometry(1.05,64,64),
  new THREE.MeshBasicMaterial({color:0x4da6ff,transparent:true,opacity:0.15,side:THREE.BackSide})
);
scene.add(atmosphere);

// CLOUDS
loader.load("https://threejs.org/examples/textures/planets/earth_clouds_1024.png", tex=>{
  const clouds = new THREE.Mesh(
    new THREE.SphereGeometry(1.01,64,64),
    new THREE.MeshPhongMaterial({map:tex,transparent:true,opacity:0.8})
  );
  scene.add(clouds);
  clouds.userData.animate = ()=>{
    clouds.rotation.y += 0.0012;
  }
});

// LOAD TEXTURES ASYNC
let progress = 0;
const textures = [
  "https://threejs.org/examples/textures/planets/earth_atmos_2048.jpg",
  "https://threejs.org/examples/textures/planets/earth_lights_2048.png"
];
textures.forEach(url=>{
  loader.load(url, tex=>{
    progress++;
    document.getElementById("loaderBarInner").style.width = (progress/textures.length*100)+"%";
    if(progress===textures.length){
      document.getElementById("loader").style.display="none";
      earth.material.map = loader.load(textures[0]);
      earth.material.emissiveMap = loader.load(textures[1]);
      earth.material.emissive = new THREE.Color(0xffffff);
      earth.material.emissiveIntensity = 0.6;
      earth.material.needsUpdate=true;
    }
  });
});

// MODE SWITCH
function setMode(m){
  document.querySelectorAll('.tab').forEach(t=>t.classList.remove('active'));
  event.target.classList.add('active');
  if(m==="2d") camera.position.set(0,0,2.2);
  if(m==="3d") camera.position.set(0,0,4);
  if(m==="4d") camera.position.set(0,1.4,4);
}

const timeSlider = document.getElementById("time");

// ANIMATE LOOP
function animate(){
  requestAnimationFrame(animate);
  const t = parseFloat(timeSlider.value);
  earth.rotation.y += 0.0008;
  scene.traverse(obj=>{if(obj.userData.animate) obj.userData.animate();});
  controls.update();
  renderer.render(scene,camera);
}
animate();

onresize = ()=>{
  camera.aspect = innerWidth/innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(innerWidth,innerHeight);
};
  <script>
// -----------------------------
// PART 2: WEATHER & 4D EFFECTS
// -----------------------------

// Dummy Wetterkarten-Texturen (keine API)
const weatherTextures = {
  rain: "https://i.ibb.co/jg3VHZg/rain.png",
  storm: "https://i.ibb.co/Gpq2k9L/storm.png",
  clouds: "https://i.ibb.co/5Yb82sQ/clouds.png"
};

// Wetter-Overlay
const weatherOverlay = new THREE.Mesh(
  new THREE.SphereGeometry(1.02,64,64),
  new THREE.MeshBasicMaterial({transparent:true, opacity:0.4})
);
scene.add(weatherOverlay);

// Zuf√§llige Animation der Wetterkarten (4D Effekt)
let weatherKeys = Object.keys(weatherTextures);
let currentWeather = 0;
function switchWeather(){
  const key = weatherKeys[currentWeather];
  loader.load(weatherTextures[key], tex=>{
    weatherOverlay.material.map = tex;
    weatherOverlay.material.needsUpdate = true;
  });
  currentWeather = (currentWeather+1)%weatherKeys.length;
}

// Zeitintervall f√ºr 4D-Effekt
setInterval(switchWeather, 5000);

// Dynamische Wolkenrotation (bereits in Teil 1 vorbereitet)
scene.traverse(obj=>{
  if(obj.userData.animate) obj.userData.animate();
});

// Hurrikan/Tornado Torus f√ºr Demo
const hurricane = new THREE.Mesh(
  new THREE.TorusGeometry(0.18,0.05,16,100),
  new THREE.MeshBasicMaterial({color:0xff3300})
);
hurricane.position.set(0.6,0.2,0.8);
scene.add(hurricane);

// 4D Zeit-Slider Manipulation
function update4D(t){
  hurricane.rotation.z += 0.05 + t*0.0005;
  hurricane.scale.setScalar(1 + Math.sin(t*0.2)*0.3);
}

// √úberschreiben animate f√ºr 4D
const oldAnimate = animate;
animate = function(){
  requestAnimationFrame(animate);
  const t = parseFloat(timeSlider.value);
  update4D(t);
  oldAnimate();
};
</script>

</body>
</html>
