<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>WEATHER-AI – Globe FIX</title>
<style>
html,body{
  margin:0;
  width:100%;
  height:100%;
  background:#020409;
  overflow:hidden;
}
#globe{
  width:100vw;
  height:100vh;
}
canvas{display:block}
</style>
</head>

<body>
<div id="globe"></div>

<script src="https://unpkg.com/three@0.158.0/build/three.min.js"></script>

<script>
const container = document.getElementById("globe");

const scene = new THREE.Scene();
scene.background = new THREE.Color(0x020409);

const camera = new THREE.PerspectiveCamera(
  45,
  window.innerWidth / window.innerHeight,
  0.1,
  1000
);
camera.position.z = 3;

const renderer = new THREE.WebGLRenderer({ antialias:true });
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setPixelRatio(window.devicePixelRatio);
renderer.outputColorSpace = THREE.SRGBColorSpace;
container.appendChild(renderer.domElement);

// LICHT (wichtig!)
scene.add(new THREE.AmbientLight(0xffffff, 0.6));
const sun = new THREE.DirectionalLight(0xffffff, 1.4);
sun.position.set(5, 3, 5);
scene.add(sun);

// TEXTURE LOADER
const loader = new THREE.TextureLoader();
loader.setCrossOrigin("anonymous");

// NASA Blue Marble – öffentlich & erlaubt
const earthTexture =
  "https://raw.githubusercontent.com/ajdruff/earth-textures/main/2k/earth_daymap.jpg";

loader.load(
  earthTexture,
  (texture) => {
    texture.colorSpace = THREE.SRGBColorSpace;

    const earth = new THREE.Mesh(
      new THREE.SphereGeometry(1, 64, 64),
      new THREE.MeshStandardMaterial({
        map: texture,
        roughness: 1,
        metalness: 0
      })
    );

    scene.add(earth);

    function animate(){
      requestAnimationFrame(animate);
      earth.rotation.y += 0.0008;
      renderer.render(scene, camera);
    }
    animate();
  },
  undefined,
  (err) => {
    console.error("TEXTUR FEHLER", err);
  }
);

window.addEventListener("resize", ()=>{
  camera.aspect = window.innerWidth/window.innerHeight;
  camera.updateProjectionMatrix();
  renderer.setSize(window.innerWidth, window.innerHeight);
});
</script>
</body>
</html>
